# 외부와 상호작용하는 어댑터 만들기

**프레임워크의 어댑터는 애플리케이션의 포트를 구현한다.**

기존에는 시스템을 다양한 기술 및 프로토콜과 호환되는 어댑터의 특성을 강조해왔지만,
DDD는 어댑터를 사용하는 다른 목적을 제안한다.

DDD 기반 아키텍처의 일반적인 관심사는 레거시 시스템의 요소를 새로운 시스템에 통합하는 것.

-> 도메인 모델에서 관련 지식이 모인 레거시 시스템이 중요한 문제를 해결하지만, 설계 불일치를 보여주는 상황에서 발생.

새로운 시스템 설계가 레거시 시스템의 설계에 영향을 주는 것도 원하지 않을 것!



입력 어댑터와 출력 어댑터 모두 프레임워크 헥사곤의 가장 끝부분에 있다!



## 드라이빙 오퍼레이션 허용을 위한 입력 어댑터 사용

입력 어댑터는 내부와 외부 사이의 명확한 경계를 표시하고 드라이빙 오퍼레이션을 수행한다.

입력 어댑터를 모두 모으면 헥사고날 애플리케이션의 API 를 형성한다.

레거시 시스템을 포기하고 싶지 않지만, 새로운 시스템 셀계가 레거시 시스템 설계에 영향을 주는 것도 원치 않을 때 **반부패 계층**을 사용할 수 있다.

이 계층은 레거시 시스템과 새로운 시스템 모두에서 경계 컨텍스트를 통합하는 데 사용되는 어댑터를 기반으로 한다. 



### 입력 어댑터

입력 포트는 유스케이스의 목표를 달성하기 위해 구현하는 수단.

```text
RouterManageNetworkAdapter<<input adapter>>
  RouterNetworkRestAdapter<<input adapter>> 
  RouterNetworkCLIAdapter<<input adapter>>
```

어댑터 추상 기반 클래스`RouterManageNetworkAdapter` 가 존재, HTTP 와 CLI 연결을 위한 어댑터 구현이 있다. 

```java
outputPort = RouterNetworkH2Adapter.getInstance();
usecase = new RouterNetworkInputPort(outputPort);
inputAdapter= new RouterNetworkRestAdapter(usecase);
```

여러 종류의 어댑터를 만들더라도, 모두 같은 입력 포트에 연결되어 헥사고날 시스템이 서로 다른 형식으로 들어오는 요청의 처리에 같은 로직을 사용하게 한다. 

`입력 Port 의 구현체 != 입력어댑터`

**입력 어댑터는 같은 입력 포트를 가져야 한다.** 





### 출력 어댑터 

출력 어댑터를 만들기 위한 요구사항은 애플리케이션 헥사곤에서 출력 포트 인터페이스를 구현하는 것.

**`출력 port 의 구현체 == 출력 어댑터`**



